<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Forgot Password</title>
  <link rel="stylesheet" href="styles/header.css">
  <link rel="stylesheet" href="styles/forgot-password.css">
  <link rel="stylesheet" href="styles/footer.css">
</head>
<body>
  <!-- Header -->
  <div id="header"></div>

  <main class="forgot-container">
    <div class="form-section">
      <h2>Forgot Password</h2>

      <!-- Username -->
      <input type="text" id="username" placeholder="Enter your username" required>

      <!-- Dropdown -->
      <select id="contactMethod">
        <option value="email">Email</option>
        <option value="phone">Phone</option>
      </select>

      <!-- Generate OTP -->
      <button id="generateOtpBtn" class="btn">Generate OTP</button>
      <p id="otpMessage"></p>

      <!-- OTP Input (hidden initially) -->
      <center>
        <div id="otpSection" class="otp-section" style="display:none;">
        <input type="text" id="otpInput" placeholder="Enter OTP">
        <button id="confirmOtpBtn" class="btn" disabled>Confirm OTP</button>
        </div>
      </center>
    </div>
  </main>

  <!-- Footer -->
  <div id="footer"></div>

  <script>
    // Load header & footer
    async function loadComponent(id, file) {
      const res = await fetch(file);
      document.getElementById(id).innerHTML = await res.text();
      if (id === "header") {
        const script = document.createElement("script");
        script.src = "header.js";
        document.body.appendChild(script);
      }
    }
    loadComponent("header", "header.html");
    loadComponent("footer", "footer.html");

    // Elements
    const generateBtn = document.getElementById("generateOtpBtn");
    const otpSection = document.getElementById("otpSection");
    const otpInput = document.getElementById("otpInput");
    const confirmOtpBtn = document.getElementById("confirmOtpBtn");
    const otpMessage = document.getElementById("otpMessage");
    const contactMethod = document.getElementById("contactMethod");

    // Generate OTP
    generateBtn.addEventListener("click", () => {
      generateBtn.disabled = true;
      const method = contactMethod.value;
      otpMessage.innerText =
        method === "email"
          ? "✅ OTP sent to your email."
          : "✅ OTP sent to your phone number.";

      otpSection.style.display = "block";
    });

    // Enable confirm button when typing OTP
    otpInput.addEventListener("input", () => {
      confirmOtpBtn.disabled = otpInput.value.trim().length === 0;
    });

    // Confirm OTP
    confirmOtpBtn.addEventListener("click", () => {
      // (In real app, verify OTP with server)
      window.location.href = "re-create-password.html";
    });

    // Handle Enter key navigation
    username.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
        e.preventDefault();
        contactMethod.focus();
        }
    });

    contactMethod.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
        e.preventDefault();
        generateBtn.click();
        }
    });

    otpInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
        e.preventDefault();
        if (!confirmOtpBtn.disabled) {
            confirmOtpBtn.click();
        }
        }
    });
  </script>
</body>
</html>